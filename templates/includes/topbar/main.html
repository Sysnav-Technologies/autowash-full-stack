<!-- Nexus Style Modern Topbar -->
{% load static %}

<header class="topbar">
    <div class="topbar-left">
        <!-- Mobile Menu Toggle (Hidden on desktop) -->
        <button type="button" 
                class="sidebar-toggle d-lg-none" 
                id="mobileSidebarToggle" 
                title="Toggle Menu" 
                aria-label="Toggle Navigation Menu">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Desktop Sidebar Toggle -->
        <button type="button" 
                class="sidebar-toggle d-none d-lg-flex" 
                id="sidebarToggle" 
                title="Toggle Sidebar" 
                aria-label="Toggle Sidebar">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Breadcrumbs Navigation -->
        <nav aria-label="breadcrumb" class="d-none d-md-block">
            <ol class="breadcrumb">
                {% block breadcrumbs %}
                    <li class="breadcrumb-item">
                        <a href="/business/{{ request.tenant.slug }}/">
                            <i class="fas fa-home me-1"></i>Dashboard
                        </a>
                    </li>
                {% endblock %}
            </ol>
        </nav>
        
        <!-- Mobile Brand (Visible only on mobile) -->
        <div class="mobile-brand d-lg-none">
            {% if request.tenant.logo %}
                <img src="{{ request.tenant.logo.url }}" alt="{{ request.tenant.name }}" class="mobile-brand-logo">
            {% else %}
                <div class="mobile-brand-logo">
                    {{ request.tenant.name|first|upper }}
                </div>
            {% endif %}
            <span class="mobile-brand-text">{{ request.tenant.name|truncatechars:15 }}</span>
        </div>
    </div>
    
    <div class="topbar-right">
        <!-- Quick Actions -->
        <div class="d-none d-md-block">
            {% include 'includes/topbar/quick_actions.html' %}
        </div>
        
        <!-- Notifications -->
        {% include 'includes/topbar/notifications.html' %}
        
        <!-- User Menu -->
        {% include 'includes/topbar/user_menu.html' %}
        
        <!-- Mobile Menu Toggle -->
        <button type="button" 
                class="mobile-menu-toggle d-md-none" 
                id="mobileMenuToggle" 
                title="Menu" 
                aria-label="Main Menu">
            <i class="fas fa-ellipsis-v"></i>
        </button>
    </div>
</header>

<!-- Mobile Menu Overlay -->
<div class="mobile-menu-overlay d-md-none" id="mobileMenuOverlay"></div>

<!-- Mobile Quick Actions Menu -->
<div class="mobile-quick-menu d-md-none" id="mobileQuickMenu">
    <div class="mobile-quick-menu-content">
        <div class="mobile-quick-menu-header">
            <h6 class="mb-0">Quick Actions</h6>
            <button type="button" class="btn-close" id="closeMobileMenu" aria-label="Close"></button>
        </div>
        <div class="mobile-quick-menu-body">
            {% include 'includes/topbar/quick_actions.html' with mobile=True %}
        </div>
    </div>
</div>