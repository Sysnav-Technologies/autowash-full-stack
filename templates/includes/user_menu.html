<!-- templates/includes/user_menu.html -->
<!-- User Menu Dropdown -->
{% load static %}

<div class="dropdown">
    <div class="user-menu" data-bs-toggle="dropdown" aria-expanded="false">
        {% if employee.photo %}
            <img src="{{ employee.photo.url }}" alt="{{ employee.full_name }}" class="user-avatar">
        {% else %}
            <div class="user-avatar placeholder">
                {{ user.first_name|first|upper|default:user.username|first|upper }}
            </div>
        {% endif %}
        <div class="user-info">
            <div class="user-name">{{ user.get_full_name|default:user.username }}</div>
            <div class="user-role">{{ user_role|default:"User" }}</div>
        </div>
        <i class="fas fa-chevron-down text-muted user-menu-arrow"></i>
    </div>
    <ul class="dropdown-menu dropdown-menu-end">
        <li><a class="dropdown-item" href="{{ nav_profile_url }}">
            <i class="fas fa-user"></i>My Profile
        </a></li>
        <li><a class="dropdown-item" href="{{ nav_attendance_url }}">
            <i class="fas fa-clock"></i>My Attendance
        </a></li>
        {% if is_owner %}
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item" href="{{ nav_settings_url }}">
            <i class="fas fa-cog"></i>Business Settings
        </a></li>
        {% endif %}
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item text-danger" href="{{ public_logout_url }}">
            <i class="fas fa-sign-out-alt"></i>Logout
        </a></li>
    </ul>
</div>